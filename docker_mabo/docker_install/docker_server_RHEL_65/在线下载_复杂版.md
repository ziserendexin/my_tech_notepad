#### 0、总体思路

- 由于RHEL与Centos的关系，所以，RHEL可以直接使用Centos的云源，使用Centos对应版本的yum源，直接安装docker-ce即可。

  如果不适用centos的yum源，那么RHEL只能使用docker-ee这种收费版。

- 然后使用yum downloadonly下载所有的依赖

- 最后copy到RHEL上装



# 以下操作请勿在生产服务器中使用

> http://blog.sina.com.cn/s/blog_50f908410101cto6.html

#### 1、配置Centos云源

##### a、云源介绍

首先是三个镜像地址：

```
# 原厂：
http://vault.centos.org/
# 163
http://mirrors.163.com/centos/
# 阿里
https://mirrors.aliyun.com/centos/
```

其中，163、阿里的镜像，已经不对6.0, 6.1, 6.2, 6.3, 6.4 and 6.5等这些版本进行镜像了。所以，可以使用6的源，或者翻墙去原厂那边取。

但另外一个角度，6和6.5的rpm包也基本相同，基本可以直接用。所以用6也大差不差。

然后是下载yum的必要安装包：

如果是32位的，替换成对应点额rpm包即可。

```
wget http://mirrors.163.com/centos/6/os/x86_64/Packages/python-iniparse-0.3.1-2.1.el6.noarch.rpm

wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-metadata-parser-1.1.2-16.el6.x86_64.rpm

wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-3.2.29-40.el6.centos.noarch.rpm

wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.30-14.el6.noarch.rpm
```

#### b、卸载RH的yum

```
rpm -qa | grep yum | xargs rpm -e --nodeps
```

注：a、xargs是一条[Unix](http://baike.baidu.com/view/8095.htm)和类Unix操作系统的常用命令。它的作用是将参数列表转换成小块分段传递给其他命令，以避免参数列表过长的问题

​        b、--nodeps  强制卸载,不管依赖性

#### c、安装centos的yum

```
rpm -ivh python-iniparse-0.3.1-2.1.el6.noarch.rpm

rpm -ivh yum-metadata-parser-1.1.2-16.el6.x86_64.rpm

rpm -ivh yum-3.2.29-40.el6.centos.noarch.rpm yum-plugin-fastestmirror-1.1.30-14.el6.noarch.rpm

#[注] :最后2个需要一起安装，否则会出现依赖性错误
```

#### d、下载repo表**到**/etc/yum.repo.d**中** 

```
wget http://mirrors.163.com/.help/CentOS6-Base-163.repo
```

#### e、修改**$releasever** 为对应的centos版本

#### f、**yum clean all** **清除原有缓存**

#### g、**yum makecache**  **获取**yum列表



#### 2、安装downloadonly插件使用yum下载rpm包

在对应yum源里面ctrl+f下，别挣扎了。

```
yum-plugin-downloadonly
```



#### 3、下载docker需要的依赖包

**3.1配置Fedora EPEL源**

epel-release-latest软件包下载地址：<https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm>

**3.2 添加hop5.repo源**

```
# cd /etc/yum.repos.d 
# wget http://www.hop5.in/yum/el6/hop5.repo</pre>
```

**3.3 下载依赖包**

```
# mkdir /usr/local/docker
# yum install --downloadonly --downloaddir=/usr/local/docker docker-io
```

**3.4 下载device-mapper-libs**

不下载后面启动docker会报错，下载网 
址：<http://mirrors.aliyun.com/centos/6/os/x86_64/Packages/>

```
# mkdir /usr/local/docker/device-mapper-libs
# yum install --downloadonly --downloaddir=/usr/local/docker/device-mapper-libs device-mapper-libs
```



后面操作转“离线安装_简易文档”